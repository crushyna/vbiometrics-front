{% extends "recorder_layout.html" %}

{% block body %}

  <body class="text-center" style="background: linear-gradient(to bottom, white 0%, gray 100%)">
    <div class="form-signin">
      <img class="img-fluid" src="{{ url_for('static', filename='images/logos/NEW_INV_logo_alone.png') }}" alt="" width="120" height="120">
      <h1 class="h3 mb-3 font-weight-normal">Record your voice:</h1>
    {% if not session.authenticated %}
    <div class="container">
        <canvas id="analyser" style="width:100%;height:300px;background-color: gray" width="100" height="500"></canvas>
        <p>
            <button id="init" class="btn btn-info" onclick="unpause()">Start listening</button>
            <button id="start" class="btn btn-success" onclick="startRecording()" disabled>Start</button>
            <button id="stop" class="btn btn-danger" onclick="stopRecording()" disabled>Stop</button>
        </p>
        <p class="text-dark bg-warning font-weight-bold">Text ID: {{message[0]}}</p>
        <p class="text-dark bg-warning font-weight-bold">Required recordings: {{message[1]}}</p>
        <p class="text-dark bg-warning font-weight-bold">Text-phrase: {{message[2]}}</p>
        <p class="text-dark bg-danger font-weight-bold">{{error}}</p>
        <textarea id="output" style="width: 100%;height: 100px" readonly></textarea>
    </div>
        {% else %}
        <a class="btn btn-primary" href="/" role="button">Proceed</a>
        <a class="btn btn-primary" href="/register_record_voice" role="button">Next recording</a>
        {% endif %}


    <script src="{{ url_for('static', filename='recorder.js') }}"></script>
    <script src="{{ url_for('static', filename='audiodisplay.js') }}"></script>
    <script src="{{ url_for('static', filename='register_main.js') }}"></script>

        {% if session.authenticated %}
        <p class="mt-5 mb-3 text-muted">&copy; 2019-2020 Malinowski, Wieczorek</p>
        {% else %}
        <a href="/register/" class="text-dark">No account? Sign up here!</a>
        <p class="mt-5 mb-3 text-muted">&copy; 2019-2020 Malinowski, Wieczorek</p>
        <a class="btn btn-primary" href="/" role="button">Return to Homepage</a>
        {% endif %}

    </div>
  </body>
{% endblock %}
